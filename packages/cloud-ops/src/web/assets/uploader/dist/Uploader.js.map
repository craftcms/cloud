{"version":3,"file":"Uploader.js","mappings":";yBACA,IAAAA,EAAAC,EAAAC,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,aAAA,yBAAAC,EAAAN,EAAAE,EAAAE,EAAAE,GAAA,IAAAC,EAAAL,GAAAA,EAAAM,qBAAAC,EAAAP,EAAAO,EAAAC,EAAAC,OAAAC,OAAAL,EAAAC,WAAA,OAAAK,EAAAH,EAAA,mBAAAV,EAAAE,EAAAE,GAAA,IAAAE,EAAAC,EAAAG,EAAAI,EAAA,EAAAC,EAAAX,GAAA,GAAAY,GAAA,EAAAC,EAAA,CAAAF,EAAA,EAAAb,EAAA,EAAAgB,EAAApB,EAAAqB,EAAAC,EAAAN,EAAAM,EAAAC,KAAAvB,EAAA,GAAAsB,EAAA,SAAArB,EAAAC,GAAA,OAAAM,EAAAP,EAAAQ,EAAA,EAAAG,EAAAZ,EAAAmB,EAAAf,EAAAF,EAAAmB,CAAA,YAAAC,EAAApB,EAAAE,GAAA,IAAAK,EAAAP,EAAAU,EAAAR,EAAAH,EAAA,GAAAiB,GAAAF,IAAAV,GAAAL,EAAAgB,EAAAO,OAAAvB,IAAA,KAAAK,EAAAE,EAAAS,EAAAhB,GAAAqB,EAAAH,EAAAF,EAAAQ,EAAAjB,EAAA,GAAAN,EAAA,GAAAI,EAAAmB,IAAArB,KAAAQ,EAAAJ,GAAAC,EAAAD,EAAA,OAAAC,EAAA,MAAAD,EAAA,GAAAA,EAAA,GAAAR,GAAAQ,EAAA,IAAAc,KAAAhB,EAAAJ,EAAA,GAAAoB,EAAAd,EAAA,KAAAC,EAAA,EAAAU,EAAAC,EAAAhB,EAAAe,EAAAf,EAAAI,EAAA,IAAAc,EAAAG,IAAAnB,EAAAJ,EAAA,GAAAM,EAAA,GAAAJ,GAAAA,EAAAqB,KAAAjB,EAAA,GAAAN,EAAAM,EAAA,GAAAJ,EAAAe,EAAAf,EAAAqB,EAAAhB,EAAA,OAAAH,GAAAJ,EAAA,SAAAmB,EAAA,MAAAH,GAAA,EAAAd,CAAA,iBAAAE,EAAAW,EAAAQ,GAAA,GAAAT,EAAA,QAAAU,UAAA,oCAAAR,GAAA,IAAAD,GAAAK,EAAAL,EAAAQ,GAAAhB,EAAAQ,EAAAL,EAAAa,GAAAxB,EAAAQ,EAAA,EAAAT,EAAAY,KAAAM,GAAA,CAAAV,IAAAC,EAAAA,EAAA,GAAAA,EAAA,IAAAU,EAAAf,GAAA,GAAAkB,EAAAb,EAAAG,IAAAO,EAAAf,EAAAQ,EAAAO,EAAAC,EAAAR,GAAA,OAAAI,EAAA,EAAAR,EAAA,IAAAC,IAAAH,EAAA,QAAAL,EAAAO,EAAAF,GAAA,MAAAL,EAAAA,EAAA0B,KAAAnB,EAAAI,IAAA,MAAAc,UAAA,wCAAAzB,EAAA2B,KAAA,OAAA3B,EAAAW,EAAAX,EAAA4B,MAAApB,EAAA,IAAAA,EAAA,YAAAA,IAAAR,EAAAO,EAAA,SAAAP,EAAA0B,KAAAnB,GAAAC,EAAA,IAAAG,EAAAc,UAAA,oCAAApB,EAAA,YAAAG,EAAA,GAAAD,EAAAR,CAAA,UAAAC,GAAAiB,EAAAC,EAAAf,EAAA,GAAAQ,EAAAV,EAAAyB,KAAAvB,EAAAe,MAAAE,EAAA,YAAApB,GAAAO,EAAAR,EAAAS,EAAA,EAAAG,EAAAX,CAAA,SAAAe,EAAA,UAAAa,MAAA5B,EAAA2B,KAAAV,EAAA,GAAAhB,EAAAI,EAAAE,IAAA,GAAAI,CAAA,KAAAS,EAAA,YAAAV,IAAA,UAAAmB,IAAA,UAAAC,IAAA,CAAA9B,EAAAY,OAAAmB,eAAA,IAAAvB,EAAA,GAAAL,GAAAH,EAAAA,EAAA,GAAAG,QAAAW,EAAAd,EAAA,GAAAG,EAAA,yBAAAH,GAAAW,EAAAmB,EAAArB,UAAAC,EAAAD,UAAAG,OAAAC,OAAAL,GAAA,SAAAO,EAAAhB,GAAA,OAAAa,OAAAoB,eAAApB,OAAAoB,eAAAjC,EAAA+B,IAAA/B,EAAAkC,UAAAH,EAAAhB,EAAAf,EAAAM,EAAA,sBAAAN,EAAAU,UAAAG,OAAAC,OAAAF,GAAAZ,CAAA,QAAA8B,EAAApB,UAAAqB,EAAAhB,EAAAH,EAAA,cAAAmB,GAAAhB,EAAAgB,EAAA,cAAAD,GAAAA,EAAAK,YAAA,oBAAApB,EAAAgB,EAAAzB,EAAA,qBAAAS,EAAAH,GAAAG,EAAAH,EAAAN,EAAA,aAAAS,EAAAH,EAAAR,EAAA,yBAAAW,EAAAH,EAAA,oDAAAwB,EAAA,kBAAAC,EAAA7B,EAAA8B,EAAAtB,EAAA,cAAAD,EAAAf,EAAAE,EAAAE,EAAAH,GAAA,IAAAO,EAAAK,OAAA0B,eAAA,IAAA/B,EAAA,gBAAAR,GAAAQ,EAAA,EAAAO,EAAA,SAAAf,EAAAE,EAAAE,EAAAH,GAAA,SAAAK,EAAAJ,EAAAE,GAAAW,EAAAf,EAAAE,EAAA,SAAAF,GAAA,YAAAwC,QAAAtC,EAAAE,EAAAJ,EAAA,GAAAE,EAAAM,EAAAA,EAAAR,EAAAE,EAAA,CAAA2B,MAAAzB,EAAAqC,YAAAxC,EAAAyC,cAAAzC,EAAA0C,UAAA1C,IAAAD,EAAAE,GAAAE,GAAAE,EAAA,UAAAA,EAAA,WAAAA,EAAA,cAAAS,EAAAf,EAAAE,EAAAE,EAAAH,EAAA,UAAA2C,EAAA1C,EAAAF,GAAA,IAAAC,EAAA,oBAAAE,QAAAD,EAAAC,OAAAE,WAAAH,EAAA,kBAAAD,EAAA,IAAA4C,MAAAC,QAAA5C,KAAAD,EAAA8C,EAAA7C,KAAAF,GAAAE,GAAA,iBAAAA,EAAAsB,OAAA,CAAAvB,IAAAC,EAAAD,GAAA,IAAA+C,EAAA,EAAAC,EAAA,oBAAAC,EAAAD,EAAA7C,EAAA,kBAAA4C,GAAA9C,EAAAsB,OAAA,CAAAI,MAAA,IAAAA,MAAA,EAAAC,MAAA3B,EAAA8C,KAAA,EAAAhD,EAAA,SAAAE,GAAA,MAAAA,CAAA,EAAAc,EAAAiC,EAAA,WAAAvB,UAAA,6IAAApB,EAAAe,GAAA,EAAAT,GAAA,SAAAsC,EAAA,WAAAjD,EAAAA,EAAA0B,KAAAzB,EAAA,EAAAE,EAAA,eAAAF,EAAAD,EAAAkD,OAAA,OAAA9B,EAAAnB,EAAA0B,KAAA1B,CAAA,EAAAF,EAAA,SAAAE,GAAAU,GAAA,EAAAN,EAAAJ,CAAA,EAAAc,EAAA,eAAAK,GAAA,MAAApB,EAAA,QAAAA,EAAA,oBAAAW,EAAA,MAAAN,CAAA,aAAA8C,EAAAlD,GAAA,gBAAAA,GAAA,GAAA2C,MAAAC,QAAA5C,GAAA,OAAAmD,EAAAnD,EAAA,CAAAoD,CAAApD,IAAA,SAAAA,GAAA,uBAAAC,QAAA,MAAAD,EAAAC,OAAAE,WAAA,MAAAH,EAAA,qBAAA2C,MAAAU,KAAArD,EAAA,CAAAsD,CAAAtD,IAAA6C,EAAA7C,IAAA,qBAAAwB,UAAA,wIAAA+B,EAAA,UAAAC,EAAAtD,EAAAH,EAAAD,EAAAE,EAAAI,EAAAe,EAAAZ,GAAA,QAAAD,EAAAJ,EAAAiB,GAAAZ,GAAAG,EAAAJ,EAAAqB,KAAA,OAAAzB,GAAA,YAAAJ,EAAAI,EAAA,CAAAI,EAAAoB,KAAA3B,EAAAW,GAAA+C,QAAAC,QAAAhD,GAAAiD,KAAA3D,EAAAI,EAAA,UAAAwD,EAAA1D,GAAA,sBAAAH,EAAA,KAAAD,EAAA+D,UAAA,WAAAJ,QAAA,SAAAzD,EAAAI,GAAA,IAAAe,EAAAjB,EAAA4D,MAAA/D,EAAAD,GAAA,SAAAiE,EAAA7D,GAAAsD,EAAArC,EAAAnB,EAAAI,EAAA2D,EAAAC,EAAA,OAAA9D,EAAA,UAAA8D,EAAA9D,GAAAsD,EAAArC,EAAAnB,EAAAI,EAAA2D,EAAAC,EAAA,QAAA9D,EAAA,CAAA6D,OAAA,eAAAE,EAAAjE,EAAAF,GAAA,gBAAAE,GAAA,GAAA2C,MAAAC,QAAA5C,GAAA,OAAAA,CAAA,CAAAkE,CAAAlE,IAAA,SAAAA,EAAAuB,GAAA,IAAAxB,EAAA,MAAAC,EAAA,yBAAAC,QAAAD,EAAAC,OAAAE,WAAAH,EAAA,uBAAAD,EAAA,KAAAD,EAAAI,EAAAI,EAAAI,EAAAS,EAAA,GAAAL,GAAA,EAAAV,GAAA,SAAAE,GAAAP,EAAAA,EAAA0B,KAAAzB,IAAAiD,KAAA,IAAA1B,EAAA,IAAAZ,OAAAZ,KAAAA,EAAA,OAAAe,GAAA,cAAAA,GAAAhB,EAAAQ,EAAAmB,KAAA1B,IAAA2B,QAAAP,EAAAgD,KAAArE,EAAA6B,OAAAR,EAAAG,SAAAC,GAAAT,GAAA,UAAAd,GAAAI,GAAA,EAAAF,EAAAF,CAAA,iBAAAc,GAAA,MAAAf,EAAA,SAAAW,EAAAX,EAAA,SAAAY,OAAAD,KAAAA,GAAA,kBAAAN,EAAA,MAAAF,CAAA,SAAAiB,CAAA,EAAAiD,CAAApE,EAAAF,IAAA+C,EAAA7C,EAAAF,IAAA,qBAAA0B,UAAA,6IAAA6C,EAAA,UAAAxB,EAAA7C,EAAAmB,GAAA,GAAAnB,EAAA,qBAAAA,EAAA,OAAAmD,EAAAnD,EAAAmB,GAAA,IAAApB,EAAA,GAAAuE,SAAA7C,KAAAzB,GAAAuE,MAAA,uBAAAxE,GAAAC,EAAAwE,cAAAzE,EAAAC,EAAAwE,YAAAC,MAAA,QAAA1E,GAAA,QAAAA,EAAA4C,MAAAU,KAAArD,GAAA,cAAAD,GAAA,2CAAA2E,KAAA3E,GAAAoD,EAAAnD,EAAAmB,QAAA,YAAAgC,EAAAnD,EAAAmB,IAAA,MAAAA,GAAAA,EAAAnB,EAAAsB,UAAAH,EAAAnB,EAAAsB,QAAA,QAAAxB,EAAA,EAAAI,EAAAyC,MAAAxB,GAAArB,EAAAqB,EAAArB,IAAAI,EAAAJ,GAAAE,EAAAF,GAAA,OAAAI,CAAA,CA4Lc,IAAFyE,EAxEEC,EA3DCC,EAvDfC,MAAMC,cAAgBD,MAAME,aAAaC,OACvC,CACEC,QAAS,KACTC,WAAY,KACZC,YAAa,EACbC,eAAgB,EAChBC,mBAAoB,EACpBC,kBAAmB,EACnBC,cAAe,KAEfC,KAAM,SAAUC,EAAUC,GAAU,IAAAC,EAAA,KAClCD,EAAWE,EAAEZ,OAAO,CAAC,EAAGH,MAAMC,cAAce,SAAUH,GACtDI,KAAKC,KAAKN,EAAUC,GACpBI,KAAKb,QAAUQ,EAAS,GACxBK,KAAKE,UAAYN,EAASO,SAC1BH,KAAKP,cAAgBO,KAAKI,aAAa9E,KAAK0E,MAC5CA,KAAKZ,WAAWiB,GAAG,SAAUL,KAAKP,eAElC7E,OAAO0F,QAAQN,KAAKJ,SAASW,QAAQC,QAAQ,SAAAC,GAAqB,IAAAC,EAAAxC,EAAAuC,EAAA,GAAnB/B,EAAIgC,EAAA,GAAEC,EAAOD,EAAA,GAC1Db,EAAKV,QAAQyB,iBAAiBlC,EAAMiC,EACtC,GAEIX,KAAKa,eAAiBb,KAAKc,gBAC7Bd,KAAKe,uBAGHf,KAAKE,WACPF,KAAKE,UAAUG,GAAG,CAChBW,SAAU,SAACC,GACLpB,EAAKqB,gBAAgBD,KACvBA,EAAME,cAAcC,aAAaC,WAAa,OAElD,EACAC,KAAM,SAACL,GACDpB,EAAKqB,gBAAgBD,IACvBpB,EAAK0B,YAAYN,EAAME,cAAcC,aAAaI,MAEtD,EACAC,UAAWzB,KAAKkB,gBAChBQ,UAAW1B,KAAKkB,iBAGtB,EAEAA,gBAAiB,SAAUD,GAAO,IAAAU,EAChC,QAAKV,SAAoB,QAAfU,EAALV,EAAOE,qBAAa,IAAAQ,GAAc,QAAdA,EAApBA,EAAsBP,oBAAY,IAAAO,IAAlCA,EAAoCH,QAIzCP,EAAMW,iBACNX,EAAMY,kBAEC,GACT,EAEAN,aAAWzC,EAAAjB,EAAA1B,IAAAE,EAAE,SAAAyF,EAAgBC,GAAQ,IAAAP,EAAAQ,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,YAAAlG,IAAAC,EAAA,SAAAkG,GAAA,cAAAA,EAAAtH,EAAAsH,EAAAnI,GAAA,OAyCP,GAxCtBqH,EAAKrE,EAAO4E,GACZC,EAAaR,EAAMe,OAAO,SAACJ,GAAS,IAAAK,EACpCC,GAAQ,EAEZ,GAAuB,QAAvBD,EAAIH,EAAKvB,sBAAc,IAAA0B,GAAnBA,EAAqBjH,OAAQ,CAC/B,IACMmH,EADUP,EAAKzD,KAAKiE,MAAM,oBACF,GAEzBN,EAAKvB,eAAe8B,SAASF,EAAcG,iBAC9CR,EAAKS,eAAeC,KAAK3E,KAAK,IAAM+D,EAAKzD,KAAO,KAChD+D,GAAQ,EAEZ,CAyBA,OAtBEJ,EAAKzC,SAASoD,aACdb,EAAKc,KAAOZ,EAAKzC,SAASoD,cAE1BX,EAAKS,eAAeG,KAAK7E,KAAK,IAAM+D,EAAKzD,KAAO,KAChD+D,GAAQ,GAIRA,GACyC,mBAAlCJ,EAAKzC,SAASsD,kBACpBb,EAAKzC,SAASsD,gBAAgBb,EAAK7C,qBAEpC6C,EAAKS,eAAeK,MAAM/E,KAAK,IAAM+D,EAAKzD,KAAO,KACjD+D,GAAQ,GAGNA,IACFJ,EAAKhD,aAAe8C,EAAKc,KACzBZ,EAAK7C,oBACL6C,EAAKe,sBAGAX,CACT,GAEAzC,KAAKqD,yBAEDrD,KAAKR,kBAAoB,GAAC,CAAA8C,EAAAnI,EAAA,QAC5B6F,KAAKb,QAAQmE,cAAc,IAAIC,MAAM,oBAAoBtB,EAAAtF,EAEtCqF,GAAUM,EAAAtH,EAAA,EAAAiH,EAAAhF,IAAA,WAAAiF,EAAAD,EAAA9H,KAAAwB,KAAE,CAAF2G,EAAAnI,EAAA,QAAd,OAAJgI,EAAID,EAAAtG,MAAA0G,EAAAnI,EAAA,EACP6F,KAAKwD,WAAWrB,GAAK,OAC3BnC,KAAKoD,qBAAqB,OAAAd,EAAAnI,EAAA,eAAAmI,EAAAnI,EAAA,eAAAmI,EAAAtH,EAAA,EAAAoH,EAAAE,EAAAnH,EAAA8G,EAAAlI,EAAAqI,GAAA,cAAAE,EAAAtH,EAAA,EAAAiH,EAAAlH,IAAAuH,EAAAvH,EAAA,UAI9BiF,KAAKR,kBAAoB,EACzBQ,KAAKX,YAAc,EACnBW,KAAKV,eAAiB,EACtBU,KAAKT,mBAAqB,EAC1BS,KAAKoD,mBAAqB,EAAE,cAAAd,EAAAlH,EAAA,KAAA0G,EAAA,qBAC7B,SAzDU2B,GAAA,OAAA3E,EAAAf,MAAA,KAAAD,UAAA,GA2DX0F,YAAU3E,EAAAhB,EAAA1B,IAAAE,EAAE,SAAAqH,EAAgBvB,GAAI,IAAAwB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,YAAA/H,IAAAC,EAAA,SAAA+H,GAAA,cAAAA,EAAAnJ,EAAAmJ,EAAAhK,GAAA,OAG5B,OAFIwJ,EAAW/I,OAAOwJ,OAAO,CAAC,EAAGpE,KAAK2D,SAAU,CAChDU,SAAUlC,EAAKzD,OACfyF,EAAAnJ,EAAA,EAAAmJ,EAAAhK,EAAA,EAGqB4E,MAAMuF,kBACzB,OACA,8BACA,CACEC,KAAMZ,IAET,OANW,OAARC,EAAQO,EAAAhJ,EAAAgJ,EAAAhK,EAAG,EAQTqK,MAAMC,IAAIb,EAASW,KAAKG,IAAKvC,EAAM,CACvCwC,QAAS,CACP,eAAgBxC,EAAKY,MAEvB6B,iBAAkB,SAACC,GACjBX,EAAK5E,eACH4E,EAAK5E,eACLuF,EAAmBC,OACnBZ,EAAK3E,mBACP2E,EAAK3E,mBAAqBsF,EAAmBC,OAE7CZ,EAAK/E,QAAQmE,cACX,IAAIyB,YAAY,wBAAyB,CACvCC,OAAQ,CACNF,OAAQZ,EAAK5E,eACb2F,MAAOf,EAAK7E,eAIpB,IACA,OAKC,OAHHzE,OAAOwJ,OAAOT,EAAUC,EAASW,KAAM,CACrCtB,KAAMd,EAAKc,KACXiC,aAAc/C,EAAK+C,eAClBf,EAAAhK,EAAA,EAEiB6F,KAAKmF,SAAShD,GAAK,OAKtC,OALK0B,EAAKM,EAAAhJ,KAGF2I,EAAiBD,EAAjBC,MAAOC,EAAUF,EAAVE,OACdnJ,OAAOwJ,OAAOT,EAAU,CAACG,MAAAA,EAAOC,OAAAA,KACjCI,EAAAhK,EAAA,EAEgBqK,MAAMY,KAAKpF,KAAKJ,SAAS8E,IAAKf,GAAS,OAAxDC,EAAQO,EAAAhJ,EACR6E,KAAKb,QAAQmE,cACX,IAAIyB,YAAY,iBAAkB,CAACC,OAAQpB,EAASW,QACpDJ,EAAAhK,EAAA,eAAAgK,EAAAnJ,EAAA,EAAAiJ,EAAAE,EAAAhJ,EAEF6E,KAAKb,QAAQmE,cACX,IAAIyB,YAAY,iBAAkB,CAChCC,OAAQ,CACNK,QAAOpB,SAAiB,QAAjBD,EAAEC,EAAOL,gBAAQ,IAAAI,GAAM,QAANA,EAAfA,EAAiBO,YAAI,IAAAP,OAAA,EAArBA,EAAuBqB,QAChChB,SAAUlC,EAAKzD,SAGnB,OAGwD,OAHxDyF,EAAAnJ,EAAA,EAEFgF,KAAKT,mBAAqB,EAC1BS,KAAKb,QAAQmE,cAAc,IAAIC,MAAM,qBAAqBY,EAAApJ,EAAA,iBAAAoJ,EAAA/I,EAAA,KAAAsI,EAAA,qBAE7D,SAjES4B,GAAA,OAAAzG,EAAAd,MAAA,KAAAD,UAAA,GAmEVsC,aAAc,SAAUa,GACtBjB,KAAKuB,YAAYN,EAAMsE,OAAO/D,OAC9BxB,KAAKZ,WAAWoG,IAAI,GACtB,EAEAL,UAAQvG,EAAAf,EAAA1B,IAAAE,EAAE,SAAAoJ,EAAgBtD,GAAI,IAAA0B,EAAA,OAAA1H,IAAAC,EAAA,SAAAsJ,GAAA,cAAAA,EAAA1K,EAAA0K,EAAAvL,GAAA,OAIY,OAHlC0J,EAAQ,IAAI8B,MAAOD,EAAA1K,EAAA,EAGvB6I,EAAM+B,IAAMC,IAAIC,gBAAgB3D,GAAMuD,EAAAvL,EAAA,EAChC0J,EAAMkC,SAAQ,OACpBF,IAAIG,gBAAgBnC,EAAM+B,KAAKF,EAAAvL,EAAA,sBAAAuL,EAAA1K,EAAA,EAAA0K,EAAAvK,EAAAuK,EAAAtK,EAAA,EAExB,MAAI,cAAAsK,EAAAtK,EAAA,EAGNyI,GAAK,EAAA4B,EAAA,iBACb,SAZOQ,GAAA,OAAArH,EAAAb,MAAA,KAAAD,UAAA,GAcRoI,QAAS,WAAY,IAAAC,EAAA,KACnBnG,KAAKZ,WAAWgH,IAAI,SAAUpG,KAAKP,eACnCO,KAAKE,UAAUkG,IAAI,qCAEnBxL,OAAO0F,QAAQN,KAAKJ,SAASW,QAAQC,QAAQ,SAAA6F,GAAqB,IAAAC,EAAApI,EAAAmI,EAAA,GAAnB3H,EAAI4H,EAAA,GAAE3F,EAAO2F,EAAA,GAC1DH,EAAKhH,QAAQoH,oBAAoB7H,EAAMiC,EACzC,EACF,GAEF,CACEZ,SAAU,CACRiD,YAAa,KACbwD,aAAc,4BACdC,cAAe,+BAMrB1H,MAAM2H,sBAAsB,6BAA8B3H,MAAMC,c","sources":["webpack:///./Uploader.js"],"sourcesContent":["/** global: Craft */\n/** global: Garnish */\n\nCraft.CloudUploader = Craft.BaseUploader.extend(\n  {\n    element: null,\n    $fileInput: null,\n    _totalBytes: 0,\n    _uploadedBytes: 0,\n    _lastUploadedBytes: 0,\n    _validFileCounter: 0,\n    _handleChange: null,\n\n    init: function ($element, settings) {\n      settings = $.extend({}, Craft.CloudUploader.defaults, settings);\n      this.base($element, settings);\n      this.element = $element[0];\n      this.$dropZone = settings.dropZone;\n      this._handleChange = this.handleChange.bind(this);\n      this.$fileInput.on('change', this._handleChange);\n\n      Object.entries(this.settings.events).forEach(([name, handler]) => {\n        this.element.addEventListener(name, handler);\n      });\n\n      if (this.allowedKinds && !this._extensionList) {\n        this._createExtensionList();\n      }\n\n      if (this.$dropZone) {\n        this.$dropZone.on({\n          dragover: (event) => {\n            if (this.handleDragEvent(event)) {\n              event.originalEvent.dataTransfer.dropEffect = 'copy';\n            }\n          },\n          drop: (event) => {\n            if (this.handleDragEvent(event)) {\n              this.uploadFiles(event.originalEvent.dataTransfer.files);\n            }\n          },\n          dragenter: this.handleDragEvent,\n          dragleave: this.handleDragEvent,\n        });\n      }\n    },\n\n    handleDragEvent: function (event) {\n      if (!event?.originalEvent?.dataTransfer?.files) {\n        return false;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      return true;\n    },\n\n    uploadFiles: async function (FileList) {\n      const files = [...FileList];\n      const validFiles = files.filter((file) => {\n        let valid = true;\n\n        if (this._extensionList?.length) {\n          const matches = file.name.match(/\\.([a-z0-4_]+)$/i);\n          const fileExtension = matches[1];\n\n          if (!this._extensionList.includes(fileExtension.toLowerCase())) {\n            this._rejectedFiles.type.push('“' + file.name + '”');\n            valid = false;\n          }\n        }\n\n        if (\n          this.settings.maxFileSize &&\n          file.size > this.settings.maxFileSize\n        ) {\n          this._rejectedFiles.size.push('“' + file.name + '”');\n          valid = false;\n        }\n\n        if (\n          valid &&\n          typeof this.settings.canAddMoreFiles === 'function' &&\n          !this.settings.canAddMoreFiles(this._validFileCounter)\n        ) {\n          this._rejectedFiles.limit.push('“' + file.name + '”');\n          valid = false;\n        }\n\n        if (valid) {\n          this._totalBytes += file.size;\n          this._validFileCounter++;\n          this._inProgressCounter++;\n        }\n\n        return valid;\n      });\n\n      this.processErrorMessages();\n\n      if (this._validFileCounter > 0) {\n        this.element.dispatchEvent(new Event('fileuploadstart'));\n\n        for (const file of validFiles) {\n          await this.uploadFile(file);\n          this._inProgressCounter--;\n        }\n      }\n\n      this._validFileCounter = 0;\n      this._totalBytes = 0;\n      this._uploadedBytes = 0;\n      this._lastUploadedBytes = 0;\n      this._inProgressCounter = 0;\n    },\n\n    uploadFile: async function (file) {\n      const formData = Object.assign({}, this.formData, {\n        filename: file.name,\n      });\n\n      try {\n        let response = await Craft.sendActionRequest(\n          'POST',\n          'cloud/assets/get-upload-url',\n          {\n            data: formData,\n          },\n        );\n\n        await axios.put(response.data.url, file, {\n          headers: {\n            'Content-Type': file.type,\n          },\n          onUploadProgress: (axiosProgressEvent) => {\n            this._uploadedBytes =\n              this._uploadedBytes +\n              axiosProgressEvent.loaded -\n              this._lastUploadedBytes;\n            this._lastUploadedBytes = axiosProgressEvent.loaded;\n\n            this.element.dispatchEvent(\n              new CustomEvent('fileuploadprogressall', {\n                detail: {\n                  loaded: this._uploadedBytes,\n                  total: this._totalBytes,\n                },\n              }),\n            );\n          },\n        });\n\n        Object.assign(formData, response.data, {\n          size: file.size,\n          lastModified: file.lastModified,\n        });\n\n        const image = await this.getImage(file);\n\n        if (image) {\n          const {width, height} = image;\n          Object.assign(formData, {width, height});\n        }\n\n        response = await axios.post(this.settings.url, formData);\n        this.element.dispatchEvent(\n          new CustomEvent('fileuploaddone', {detail: response.data}),\n        );\n      } catch (error) {\n        this.element.dispatchEvent(\n          new CustomEvent('fileuploadfail', {\n            detail: {\n              message: error?.response?.data?.message,\n              filename: file.name,\n            },\n          }),\n        );\n      } finally {\n        this._lastUploadedBytes = 0;\n        this.element.dispatchEvent(new Event('fileuploadalways'));\n      }\n    },\n\n    handleChange: function (event) {\n      this.uploadFiles(event.target.files);\n      this.$fileInput.val('');\n    },\n\n    getImage: async function (file) {\n      const image = new Image();\n\n      try {\n        image.src = URL.createObjectURL(file);\n        await image.decode();\n        URL.revokeObjectURL(image.src);\n      } catch {\n        return null;\n      }\n\n      return image;\n    },\n\n    destroy: function () {\n      this.$fileInput.off('change', this._handleChange);\n      this.$dropZone.off('dragover drop dragenter dragleave');\n\n      Object.entries(this.settings.events).forEach(([name, handler]) => {\n        this.element.removeEventListener(name, handler);\n      });\n    },\n  },\n  {\n    defaults: {\n      maxFileSize: null,\n      createAction: 'cloud/assets/create-asset',\n      replaceAction: 'cloud/assets/replace-file',\n    },\n  },\n);\n\n// Register it!\nCraft.registerUploaderClass('craft\\\\cloud\\\\fs\\\\AssetsFs', Craft.CloudUploader);\n"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_invoke","enumerable","configurable","writable","_createForOfIteratorHelper","Array","isArray","_unsupportedIterableToArray","_n","F","s","next","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","from","_iterableToArray","_nonIterableSpread","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_slicedToArray","_arrayWithHoles","push","_iterableToArrayLimit","_nonIterableRest","toString","slice","constructor","name","test","_getImage","_uploadFile","_uploadFiles","Craft","CloudUploader","BaseUploader","extend","element","$fileInput","_totalBytes","_uploadedBytes","_lastUploadedBytes","_validFileCounter","_handleChange","init","$element","settings","_this","$","defaults","this","base","$dropZone","dropZone","handleChange","on","entries","events","forEach","_ref","_ref2","handler","addEventListener","allowedKinds","_extensionList","_createExtensionList","dragover","event","handleDragEvent","originalEvent","dataTransfer","dropEffect","drop","uploadFiles","files","dragenter","dragleave","_event$originalEvent","preventDefault","stopPropagation","_callee","FileList","validFiles","_iterator","_step","file","_t","_this2","_context","filter","_this2$_extensionList","valid","fileExtension","match","includes","toLowerCase","_rejectedFiles","type","maxFileSize","size","canAddMoreFiles","limit","_inProgressCounter","processErrorMessages","dispatchEvent","Event","uploadFile","_x","_callee2","formData","response","image","width","height","_error$response","_t2","_this3","_context2","assign","filename","sendActionRequest","data","axios","put","url","headers","onUploadProgress","axiosProgressEvent","loaded","CustomEvent","detail","total","lastModified","getImage","post","message","_x2","target","val","_callee3","_context3","Image","src","URL","createObjectURL","decode","revokeObjectURL","_x3","destroy","_this4","off","_ref3","_ref4","removeEventListener","createAction","replaceAction","registerUploaderClass"],"sourceRoot":""}